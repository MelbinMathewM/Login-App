<%- include('../layouts/header') %>

<div class="admincon container-fluid-fluid">
    <header class="header">
        <div class="row">
            <div class="col-md-6">
                <h1 class="ps-5 text-light mt-3">Dashboard</h1>
            </div>
            <div class="col-md-6">
                <button id="search-toggle-btn" class="btn btn-warning">Search</button>
                <form  id="search-form" class="search-form d-flex justify-content-md-end me-auto d-none" method="get">
                    <input type="search" class="form-control me-1" id="search" placeholder="Search..."
                        value="<%= search %>" name="search" aria-label="search">
                    <button class="btn btn-warning" type="submit">Search</button>
                </form>
            </div>
        </div>
        <a href="/admin/new-user"><button class="btn btn-primary add-user mt-3 mt-md-0">Add User</button></a>
    </header>
    <main>
        <div class="user-grid row">
            <% users.forEach(user=> { %>
                <div class="user-card col-md-4">
                    <img src="/userImages/<%= user.photo %>" alt="User Image" class="user-image">
                    <h2>
                        <%= user.name %>
                    </h2>
                    <p>Email: <%= user.email %>
                    </p>
                    <p>Mobile: <%= user.phone %>
                    </p>
                    <div class="text-center">
                        <a href="/admin/edit-user?id=<%= user._id %>"><button
                                class="btn btn-primary">Edit</button></a>
                        <a href="/admin/delete-user?id=<%= user._id %>"><button
                                onclick="confirmDelete('<%= user._id %>')"
                                class="btn btn-danger">Delete</button></a>
                    </div>
                </div>
            <% }) %>
        </div>
    </main>
    <a href="/admin/home"><button class="btn btn-success text-center dashbb center-div mt-3">Go Back</button></a>
</div>
    <script>
        function confirmDelete(userId) {
            if (confirm("Are you sure you want to delete this user?")) {
                window.location.href = `/admin/delete-user?id=${userId}&confirm=true`;
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
        const searchToggleBtn = document.getElementById('search-toggle-btn');
        const searchInput = document.getElementById('search');
        const searchForm = document.getElementById('search-form');

        
        searchToggleBtn.addEventListener('click', function() {
            event.preventDefault();
            searchForm.classList.remove('d-none');
            searchToggleBtn.classList.add('d-none');
        });
    });
    </script>
<%- include('../layouts/footer') %>